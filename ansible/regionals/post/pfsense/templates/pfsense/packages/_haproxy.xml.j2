<package>
	<name>haproxy</name>
	<pkginfolink>https://docs.netgate.com/pfsense/en/latest/packages/haproxy.html</pkginfolink>
	<descr><![CDATA[The Reliable, High Performance TCP/HTTP(S) Load Balancer.&lt;br /&gt;This package implements the TCP, HTTP and HTTPS balancing features from haproxy.&lt;br /&gt;Supports ACLs for smart backend switching.]]></descr>
	<website>http://haproxy.1wt.eu/</website>
	<version>{{ pfsense_versions[pfsense_version].haproxy_version }}</version>
	<configurationfile>haproxy.xml</configurationfile>
	<logging>
		<logsocket>/tmp/haproxy_chroot/var/run/log</logsocket>
		<facilityname>haproxy</facilityname>
		<logfilename>haproxy.log</logfilename>
	</logging>
	<filter_rule_function>haproxy_generate_rules</filter_rule_function>
	<include_file>/usr/local/pkg/haproxy/haproxy.inc</include_file>
	<plugins>
		<item>
			<type>plugin_carp</type>
		</item>
		<item>
			<type>plugin_certificates</type>
		</item>
	</plugins>
</package>
<menu>
	<name>HAProxy</name>
	<tooltiptext></tooltiptext>
	<section>Services</section>
	<url>/haproxy/haproxy_listeners.php</url>
</menu>
<menu>
	<name>HAProxy Stats</name>
	<tooltiptext>Stats of HAProxy</tooltiptext>
	<section>Status</section>
	<url>/haproxy/haproxy_stats.php?haproxystats=1</url>
</menu>
<haproxy>
	<ha_backends>
		<item>
			<name>SharedFrontend</name>
			<descr><![CDATA[Frontend for proxied services]]></descr>
			<status>active</status>
			<type>http</type>
			<forwardfor>yes</forwardfor>
			<httpclose>http-keep-alive</httpclose>
			<client_timeout>360000</client_timeout>
			<ssloffloadcert>67c74d290a88d</ssloffloadcert>
			<advanced></advanced>
			<ha_acls>
				<item>
					<name>acl-domain</name>
					<expression>host_ends_with</expression>
					<value>{{ team_domain }}</value>
					<backendservercountbackend>backend-kube-http</backendservercountbackend>
					<_index></_index>
				</item>
				<item>
					<name>acl-teleport</name>
					<expression>host_ends_with</expression>
					<value>teleport.{{ team_domain }}</value>
					<backendservercountbackend>backend-kube-http</backendservercountbackend>
					<_index></_index>
				</item>
				<item>
					<name>acl-firewall</name>
					<expression>host_ends_with</expression>
					<value>firewall.{{ team_domain }}</value>
					<backendservercountbackend>backend-kube-http</backendservercountbackend>
					<_index></_index>
				</item>
				<item>
					<name>acl-graylog</name>
					<expression>host_ends_with</expression>
					<value>graylog.{{ team_domain }}</value>
					<backendservercountbackend>backend-graylog</backendservercountbackend>
					<_index></_index>
				</item>
			</ha_acls>
			<ha_certificates></ha_certificates>
			<clientcert_ca></clientcert_ca>
			<clientcert_crl></clientcert_crl>
			<a_extaddr>
				<item>
					<extaddr>wan_ipv4</extaddr>
					<extaddr_port>80</extaddr_port>
					<_index></_index>
				</item>
				<item>
					<extaddr>wan_ipv4</extaddr>
					<extaddr_port>443</extaddr_port>
					<extaddr_ssl>yes</extaddr_ssl>
					<_index></_index>
				</item>
				<item>
					<extaddr>{{ team_address.firewall_vip }}_ipv4</extaddr>
					<extaddr_port>443</extaddr_port>
					<extaddr_ssl>yes</extaddr_ssl>
					<_index></_index>
				</item>
			</a_extaddr>
			<a_actionitems>
				<item>
					<action>use_backend</action>
					<acl>acl-domain !acl-teleport !acl-firewall !acl-graylog</acl>
					<use_backendbackend>backend-kube-http</use_backendbackend>
					<_index></_index>
				</item>
				<item>
					<action>use_backend</action>
					<acl>acl-teleport</acl>
					<use_backendbackend>backend-teleport</use_backendbackend>
					<_index></_index>
				</item>
				<item>
					<action>use_backend</action>
					<acl>acl-firewall</acl>
					<use_backendbackend>backend-pfSense</use_backendbackend>
					<_index></_index>
				</item>
				<item>
					<action>use_backend</action>
					<acl>acl-graylog</acl>
					<use_backendbackend>backend-graylog</use_backendbackend>
					<_index></_index>
				</item>
			</a_actionitems>
			<a_errorfiles></a_errorfiles>
		</item>
	</ha_backends>
	<ha_pools>
		<item>
			<ha_servers>
				<item>
					<status>active</status>
					<name>pfSense-vip</name>
					<address>{{ team_address.firewall_vip }}</address>
					<port>8080</port>
					<ssl>yes</ssl>
					<id>101</id>
					<_index></_index>
				</item>
			</ha_servers>
			<a_acl></a_acl>
			<a_actionitems></a_actionitems>
			<errorfiles></errorfiles>
			<advanced></advanced>
			<advanced_backend></advanced_backend>
			<name>backend-pfSense</name>
			<balance></balance>
			<balance_urilen></balance_urilen>
			<balance_uridepth></balance_uridepth>
			<balance_uriwhole></balance_uriwhole>
			<transparent_clientip></transparent_clientip>
			<transparent_interface>lan</transparent_interface>
			<check_type>Basic</check_type>
			<checkinter></checkinter>
			<log-health-checks></log-health-checks>
			<httpcheck_method>OPTIONS</httpcheck_method>
			<monitor_uri></monitor_uri>
			<monitor_httpversion></monitor_httpversion>
			<monitor_username></monitor_username>
			<monitor_domain></monitor_domain>
			<monitor_agentport>backend-pfSense</monitor_agentport>
			<agent_check></agent_check>
			<agent_port></agent_port>
			<agent_inter></agent_inter>
			<connection_timeout></connection_timeout>
			<server_timeout></server_timeout>
			<retries></retries>
			<stats_enabled></stats_enabled>
			<stats_username></stats_username>
			<stats_password></stats_password>
			<stats_uri></stats_uri>
			<stats_scope></stats_scope>
			<stats_realm></stats_realm>
			<stats_admin></stats_admin>
			<stats_node></stats_node>
			<stats_desc></stats_desc>
			<stats_refresh></stats_refresh>
			<persist_stick_expire></persist_stick_expire>
			<persist_stick_tablesize></persist_stick_tablesize>
			<persist_stick_length></persist_stick_length>
			<persist_stick_cookiename></persist_stick_cookiename>
			<persist_sticky_type>none</persist_sticky_type>
			<persist_cookie_enabled></persist_cookie_enabled>
			<persist_cookie_name></persist_cookie_name>
			<persist_cookie_mode>passive</persist_cookie_mode>
			<persist_cookie_cachable></persist_cookie_cachable>
			<persist_cookie_postonly></persist_cookie_postonly>
			<persist_cookie_httponly></persist_cookie_httponly>
			<persist_cookie_secure></persist_cookie_secure>
			<haproxy_cookie_maxidle></haproxy_cookie_maxidle>
			<haproxy_cookie_maxlife></haproxy_cookie_maxlife>
			<haproxy_cookie_domains></haproxy_cookie_domains>
			<haproxy_cookie_dynamic_cookie_key></haproxy_cookie_dynamic_cookie_key>
			<strict_transport_security></strict_transport_security>
			<cookie_attribute_secure></cookie_attribute_secure>
			<email_level></email_level>
			<email_to></email_to>
			<id>100</id>
		</item>
		<item>
			<ha_servers>
				<item>
					<status>active</status>
					<name>controller</name>
					<address>{{ team_address.ctrl_plane }}</address>
					<port>8000</port>
					<_index></_index>
					<id>103</id>
				</item>
				<item>
					<status>backup</status>
					<name>worker-0</name>
					<address>{{ team_address.node_0 }}</address>
					<port>8000</port>
					<_index></_index>
					<id>104</id>
				</item>
				<item>
					<status>backup</status>
					<name>worker-1</name>
					<address>{{ team_address.node_1 }}</address>
					<port>8000</port>
					<_index></_index>
					<id>105</id>
				</item>
				<item>
					<status>backup</status>
					<name>worker-2</name>
					<address>{{ team_address.node_2 }}</address>
					<port>8000</port>
					<_index></_index>
					<id>106</id>
				</item>
			</ha_servers>
			<a_acl></a_acl>
			<a_actionitems></a_actionitems>
			<errorfiles></errorfiles>
			<advanced></advanced>
			<advanced_backend></advanced_backend>
			<name>backend-kube-http</name>
			<balance></balance>
			<balance_urilen></balance_urilen>
			<balance_uridepth></balance_uridepth>
			<balance_uriwhole></balance_uriwhole>
			<transparent_clientip></transparent_clientip>
			<transparent_interface>lan</transparent_interface>
			<check_type>Basic</check_type>
			<checkinter></checkinter>
			<log-health-checks></log-health-checks>
			<httpcheck_method>OPTIONS</httpcheck_method>
			<monitor_uri></monitor_uri>
			<monitor_httpversion></monitor_httpversion>
			<monitor_username></monitor_username>
			<monitor_domain></monitor_domain>
			<monitor_agentport></monitor_agentport>
			<agent_check></agent_check>
			<agent_port></agent_port>
			<agent_inter></agent_inter>
			<connection_timeout></connection_timeout>
			<server_timeout></server_timeout>
			<retries></retries>
			<stats_enabled></stats_enabled>
			<stats_username></stats_username>
			<stats_password></stats_password>
			<stats_uri></stats_uri>
			<stats_scope></stats_scope>
			<stats_realm></stats_realm>
			<stats_admin></stats_admin>
			<stats_node></stats_node>
			<stats_desc></stats_desc>
			<stats_refresh></stats_refresh>
			<persist_stick_expire></persist_stick_expire>
			<persist_stick_tablesize></persist_stick_tablesize>
			<persist_stick_length></persist_stick_length>
			<persist_stick_cookiename></persist_stick_cookiename>
			<persist_sticky_type>none</persist_sticky_type>
			<persist_cookie_enabled></persist_cookie_enabled>
			<persist_cookie_name></persist_cookie_name>
			<persist_cookie_mode>passive</persist_cookie_mode>
			<persist_cookie_cachable></persist_cookie_cachable>
			<persist_cookie_postonly></persist_cookie_postonly>
			<persist_cookie_httponly></persist_cookie_httponly>
			<persist_cookie_secure></persist_cookie_secure>
			<haproxy_cookie_maxidle></haproxy_cookie_maxidle>
			<haproxy_cookie_maxlife></haproxy_cookie_maxlife>
			<haproxy_cookie_domains></haproxy_cookie_domains>
			<haproxy_cookie_dynamic_cookie_key></haproxy_cookie_dynamic_cookie_key>
			<strict_transport_security></strict_transport_security>
			<cookie_attribute_secure></cookie_attribute_secure>
			<email_level></email_level>
			<email_to></email_to>
			<id>102</id>
		</item>
		<item>
			<ha_servers>
				<item>
					<status>active</status>
					<name>teleport</name>
					<address>{{ team_address.teleport }}</address>
					<port>443</port>
					<ssl>yes</ssl>
					<_index></_index>
					<id>108</id>
				</item>
			</ha_servers>
			<a_acl></a_acl>
			<a_actionitems></a_actionitems>
			<errorfiles></errorfiles>
			<advanced></advanced>
			<advanced_backend></advanced_backend>
			<name>backend-teleport</name>
			<balance></balance>
			<balance_urilen></balance_urilen>
			<balance_uridepth></balance_uridepth>
			<balance_uriwhole></balance_uriwhole>
			<transparent_clientip></transparent_clientip>
			<transparent_interface>lan</transparent_interface>
			<check_type>Basic</check_type>
			<checkinter></checkinter>
			<log-health-checks></log-health-checks>
			<httpcheck_method>OPTIONS</httpcheck_method>
			<monitor_uri></monitor_uri>
			<monitor_httpversion></monitor_httpversion>
			<monitor_username></monitor_username>
			<monitor_domain></monitor_domain>
			<monitor_agentport></monitor_agentport>
			<agent_check></agent_check>
			<agent_port></agent_port>
			<agent_inter></agent_inter>
			<connection_timeout></connection_timeout>
			<server_timeout></server_timeout>
			<retries></retries>
			<stats_enabled></stats_enabled>
			<stats_username></stats_username>
			<stats_password></stats_password>
			<stats_uri></stats_uri>
			<stats_scope></stats_scope>
			<stats_realm></stats_realm>
			<stats_admin></stats_admin>
			<stats_node></stats_node>
			<stats_desc></stats_desc>
			<stats_refresh></stats_refresh>
			<persist_stick_expire></persist_stick_expire>
			<persist_stick_tablesize></persist_stick_tablesize>
			<persist_stick_length></persist_stick_length>
			<persist_stick_cookiename></persist_stick_cookiename>
			<persist_sticky_type>none</persist_sticky_type>
			<persist_cookie_enabled></persist_cookie_enabled>
			<persist_cookie_name></persist_cookie_name>
			<persist_cookie_mode>passive</persist_cookie_mode>
			<persist_cookie_cachable></persist_cookie_cachable>
			<persist_cookie_postonly></persist_cookie_postonly>
			<persist_cookie_httponly></persist_cookie_httponly>
			<persist_cookie_secure></persist_cookie_secure>
			<haproxy_cookie_maxidle></haproxy_cookie_maxidle>
			<haproxy_cookie_maxlife></haproxy_cookie_maxlife>
			<haproxy_cookie_domains></haproxy_cookie_domains>
			<haproxy_cookie_dynamic_cookie_key></haproxy_cookie_dynamic_cookie_key>
			<strict_transport_security></strict_transport_security>
			<cookie_attribute_secure></cookie_attribute_secure>
			<email_level></email_level>
			<email_to></email_to>
			<id>107</id>
		</item>
		<item>
			<ha_servers>
				<item>
					<status>active</status>
					<name>graylog</name>
					<address>{{ team_address.graylog }}</address>
					<port>9000</port>
					<id>108</id>
					<_index></_index>
				</item>
			</ha_servers>
			<a_acl></a_acl>
			<a_actionitems></a_actionitems>
			<errorfiles></errorfiles>
			<advanced></advanced>
			<advanced_backend></advanced_backend>
			<name>backend-graylog</name>
			<balance></balance>
			<balance_urilen></balance_urilen>
			<balance_uridepth></balance_uridepth>
			<balance_uriwhole></balance_uriwhole>
			<transparent_clientip></transparent_clientip>
			<transparent_interface>lan</transparent_interface>
			<check_type>Basic</check_type>
			<checkinter></checkinter>
			<log-health-checks></log-health-checks>
			<httpcheck_method>OPTIONS</httpcheck_method>
			<monitor_uri></monitor_uri>
			<monitor_httpversion></monitor_httpversion>
			<monitor_username></monitor_username>
			<monitor_domain></monitor_domain>
			<monitor_agentport>backend-teleport-copy</monitor_agentport>
			<agent_check></agent_check>
			<agent_port></agent_port>
			<agent_inter></agent_inter>
			<connection_timeout></connection_timeout>
			<server_timeout></server_timeout>
			<retries></retries>
			<stats_enabled></stats_enabled>
			<stats_username></stats_username>
			<stats_password></stats_password>
			<stats_uri></stats_uri>
			<stats_scope></stats_scope>
			<stats_realm></stats_realm>
			<stats_admin></stats_admin>
			<stats_node></stats_node>
			<stats_desc></stats_desc>
			<stats_refresh></stats_refresh>
			<persist_stick_expire></persist_stick_expire>
			<persist_stick_tablesize></persist_stick_tablesize>
			<persist_stick_length></persist_stick_length>
			<persist_stick_cookiename></persist_stick_cookiename>
			<persist_sticky_type>none</persist_sticky_type>
			<persist_cookie_enabled></persist_cookie_enabled>
			<persist_cookie_name></persist_cookie_name>
			<persist_cookie_mode>passive</persist_cookie_mode>
			<persist_cookie_cachable></persist_cookie_cachable>
			<persist_cookie_postonly></persist_cookie_postonly>
			<persist_cookie_httponly></persist_cookie_httponly>
			<persist_cookie_secure></persist_cookie_secure>
			<haproxy_cookie_maxidle></haproxy_cookie_maxidle>
			<haproxy_cookie_maxlife></haproxy_cookie_maxlife>
			<haproxy_cookie_domains></haproxy_cookie_domains>
			<haproxy_cookie_dynamic_cookie_key></haproxy_cookie_dynamic_cookie_key>
			<strict_transport_security></strict_transport_security>
			<cookie_attribute_secure></cookie_attribute_secure>
			<email_level></email_level>
			<email_to></email_to>
			<id>109</id>
		</item>
	</ha_pools>
	<configversion>00.58</configversion>
	<email_mailers></email_mailers>
	<dns_resolvers></dns_resolvers>
	<enable></enable>
	<terminate_on_reload></terminate_on_reload>
	<maxconn>1000</maxconn>
	<logfacility>local0</logfacility>
	<loglevel>info</loglevel>
	<localstatsport>2200</localstatsport>
	<nbthread></nbthread>
	<hard_stop_after></hard_stop_after>
	<localstats_refreshtime></localstats_refreshtime>
	<localstats_sticktable_refreshtime></localstats_sticktable_refreshtime>
	<log-send-hostname></log-send-hostname>
	<sslcompatibilitymode>auto</sslcompatibilitymode>
	<ssldefaultdhparam>2048</ssldefaultdhparam>
	<email_level></email_level>
	<email_myhostname></email_myhostname>
	<email_from></email_from>
	<email_to></email_to>
	<resolver_retries></resolver_retries>
	<resolver_timeoutretry></resolver_timeoutretry>
	<resolver_holdvalid></resolver_holdvalid>
	<files></files>
</haproxy>
<service>
	<name>haproxy</name>
	<rcfile>haproxy.sh</rcfile>
	<executable>haproxy</executable>
	<description><![CDATA[TCP/HTTP(S) Load Balancer]]></description>
</service>